{
  "version": 3,
  "sources": ["../../../src/core/event-emitter.ts"],
  "sourcesContent": ["import { EventCallback, EventName } from '../types';\n\nexport class EventEmitter {\n  listeners: Map<EventName, Set<EventCallback>> = new Map();\n\n  on(eventName: EventName, fn: EventCallback): void {\n    if (!this.listeners.has(eventName)) {\n      this.listeners.set(eventName, new Set());\n    }\n    this.listeners.get(eventName).add(fn);\n  }\n\n  once(eventName: EventName, fn: EventCallback): void {\n    if (!this.listeners.has(eventName)) {\n      this.listeners.set(eventName, new Set());\n    }\n\n    const onceWrapper = (eventName: EventName, ...args: any[]) => {\n      fn(eventName, ...args);\n      this.off(eventName, onceWrapper);\n    };\n    this.listeners.get(eventName).add(onceWrapper);\n  }\n\n  off(eventName: EventName, fn: EventCallback): void {\n    const set = this.listeners.get(eventName);\n    if (set) {\n      set.delete(fn);\n    }\n  }\n\n  emit(eventName: EventName, ...args: any[]): boolean {\n    const fns = this.listeners.get(eventName);\n    if (!fns) return false;\n\n    fns.forEach((f) => {\n      f(eventName, ...args);\n    });\n    return true;\n  }\n\n  // listenerCount(eventName) {\n  //   let fns = this.listeners[eventName] || [];\n  //   return fns.length;\n  // }\n  // rawListeners(eventName) {\n  //   return this.listeners[eventName];\n  // }\n}\n"],
  "mappings": ";AAEO,yBAAmB;AAAA,EAAnB,cAFP;AAGE,qBAAgD,IAAI;AAAA;AAAA,EAEpD,GAAG,WAAsB,IAAyB;AAChD,QAAI,CAAC,KAAK,UAAU,IAAI,YAAY;AAClC,WAAK,UAAU,IAAI,WAAW,IAAI;AAAA;AAEpC,SAAK,UAAU,IAAI,WAAW,IAAI;AAAA;AAAA,EAGpC,KAAK,WAAsB,IAAyB;AAClD,QAAI,CAAC,KAAK,UAAU,IAAI,YAAY;AAClC,WAAK,UAAU,IAAI,WAAW,IAAI;AAAA;AAGpC,UAAM,cAAc,CAAC,eAAyB,SAAgB;AAC5D,SAAG,YAAW,GAAG;AACjB,WAAK,IAAI,YAAW;AAAA;AAEtB,SAAK,UAAU,IAAI,WAAW,IAAI;AAAA;AAAA,EAGpC,IAAI,WAAsB,IAAyB;AACjD,UAAM,MAAM,KAAK,UAAU,IAAI;AAC/B,QAAI,KAAK;AACP,UAAI,OAAO;AAAA;AAAA;AAAA,EAIf,KAAK,cAAyB,MAAsB;AAClD,UAAM,MAAM,KAAK,UAAU,IAAI;AAC/B,QAAI,CAAC;AAAK,aAAO;AAEjB,QAAI,QAAQ,CAAC,MAAM;AACjB,QAAE,WAAW,GAAG;AAAA;AAElB,WAAO;AAAA;AAAA;",
  "names": []
}
